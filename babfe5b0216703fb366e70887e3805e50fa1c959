{
  "version": 2,
  "session": {
    "session_id": "62f8b159-8ba4-4261-a2bf-b4aaf2f7b130",
    "model": {
      "id": "claude-opus-4-5-20251101",
      "provider": "anthropic"
    },
    "started_at": "2026-02-01T02:39:09.357707+00:00",
    "prompt_count": 1
  },
  "prompts": [
    {
      "index": 0,
      "text": "\"yes, implement smart consolidation as the default\"",
      "timestamp": "2026-02-01T02:39:09.357946+00:00",
      "affected_files": [
        "src/cli/annotations.rs"
      ]
    }
  ],
  "files": [
    {
      "path": "src/cli/annotations.rs",
      "lines": [
        {
          "line_number": 1,
          "content": "//! Annotations command - generate annotations for GitHub Checks API",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 2,
          "content": "//!",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 3,
          "content": "//! This command outputs annotation data that can be consumed by GitHub's Checks API",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 4,
          "content": "//! to display line-level AI attribution directly in the \"Files changed\" tab of PRs.",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 5,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 6,
          "content": "use anyhow::{Context, Result};",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 7,
          "content": "use clap::{Args, ValueEnum};",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 8,
          "content": "use colored::Colorize;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 9,
          "content": "use git2::Repository;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 10,
          "content": "use serde::Serialize;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 11,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 12,
          "content": "use crate::capture::snapshot::LineSource;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 13,
          "content": "use crate::core::attribution::BlameLineResult;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 14,
          "content": "use crate::core::blame::AIBlamer;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 15,
          "content": "use crate::storage::notes::NotesStore;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 16,
          "content": "use crate::utils::truncate_prompt;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 17,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 18,
          "content": "/// Output format for annotations",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 19,
          "content": "#[derive(Debug, Clone, Copy, Default, ValueEnum)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 20,
          "content": "pub enum AnnotationsFormat {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 21,
          "content": "    /// GitHub Checks API format",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 22,
          "content": "    #[default]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 23,
          "content": "    GithubChecks,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 24,
          "content": "    /// Plain JSON array",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 25,
          "content": "    Json,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 26,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 27,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 28,
          "content": "/// Consolidation mode for annotations",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 29,
          "content": "#[derive(Debug, Clone, Copy, Default, ValueEnum)]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 30,
          "content": "pub enum ConsolidateMode {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 31,
          "content": "    /// Smart consolidation: file-level for new/high-AI files, granular for mixed",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 32,
          "content": "    #[default]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 33,
          "content": "    Auto,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 34,
          "content": "    /// One annotation per file",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 35,
          "content": "    File,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 36,
          "content": "    /// Granular line-level annotations (original behavior)",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 37,
          "content": "    Lines,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 38,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 39,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 40,
          "content": "/// Annotation level (maps to GitHub Checks API annotation_level)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 41,
          "content": "#[derive(Debug, Clone, Copy, Serialize)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 42,
          "content": "#[serde(rename_all = \"lowercase\")]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 43,
          "content": "pub enum AnnotationLevel {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 44,
          "content": "    Notice,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 45,
          "content": "    Warning,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 46,
          "content": "    Failure,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 47,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 48,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 49,
          "content": "/// A single annotation for the GitHub Checks API",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 50,
          "content": "#[derive(Debug, Clone, Serialize)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 51,
          "content": "pub struct CheckAnnotation {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 52,
          "content": "    /// File path relative to repository root",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 53,
          "content": "    pub path: String,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 54,
          "content": "    /// Starting line number",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 55,
          "content": "    pub start_line: u32,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 56,
          "content": "    /// Ending line number (same as start_line for single-line annotations)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 57,
          "content": "    pub end_line: u32,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 58,
          "content": "    /// Annotation level (notice, warning, failure)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 59,
          "content": "    pub annotation_level: AnnotationLevel,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 60,
          "content": "    /// Short title for the annotation",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 61,
          "content": "    pub title: String,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 62,
          "content": "    /// Detailed message (shown when expanded)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 63,
          "content": "    pub message: String,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 64,
          "content": "    /// Optional raw details (not rendered as markdown)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 65,
          "content": "    #[serde(skip_serializing_if = \"Option::is_none\")]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 66,
          "content": "    pub raw_details: Option<String>,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 67,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 68,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 69,
          "content": "/// Annotations command arguments",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 70,
          "content": "#[derive(Debug, Args)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 71,
          "content": "pub struct AnnotationsArgs {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 72,
          "content": "    /// Base commit (exclusive) - defaults to first commit if not specified",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 73,
          "content": "    #[arg(long)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 74,
          "content": "    pub base: Option<String>,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 75,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 76,
          "content": "    /// Head commit (inclusive) - defaults to HEAD",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 77,
          "content": "    #[arg(long, default_value = \"HEAD\")]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 78,
          "content": "    pub head: String,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 79,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 80,
          "content": "    /// Output format",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 81,
          "content": "    #[arg(long, value_enum, default_value_t = AnnotationsFormat::GithubChecks)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 82,
          "content": "    pub format: AnnotationsFormat,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 83,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 84,
          "content": "    /// Consolidation mode: auto (smart), file (per-file), lines (granular)",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 85,
          "content": "    #[arg(long, value_enum, default_value_t = ConsolidateMode::Auto)]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 86,
          "content": "    pub consolidate: ConsolidateMode,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 87,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 88,
          "content": "    /// AI coverage threshold for auto-consolidation (0.0-1.0, default 0.7)",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 89,
          "content": "    #[arg(long, default_value = \"0.7\")]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 90,
          "content": "    pub consolidate_threshold: f64,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 91,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 92,
          "content": "    /// Minimum number of AI lines to create an annotation (reduces noise)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 93,
          "content": "    #[arg(long, default_value = \"1\")]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 94,
          "content": "    pub min_lines: u32,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 95,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 96,
          "content": "    /// Maximum annotations to output (GitHub limits to 50 per update)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 97,
          "content": "    #[arg(long, default_value = \"50\")]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 98,
          "content": "    pub max_annotations: usize,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 99,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 100,
          "content": "    /// Only annotate pure AI lines (not AI-modified)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 101,
          "content": "    #[arg(long)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 102,
          "content": "    pub ai_only: bool,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 103,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 104,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 105,
          "content": "/// File-level statistics for consolidation decisions",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 106,
          "content": "struct FileStats {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 107,
          "content": "    path: String,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 108,
          "content": "    total_lines: usize,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 109,
          "content": "    ai_lines: usize,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 110,
          "content": "    ai_modified_lines: usize,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 111,
          "content": "    human_lines: usize,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 112,
          "content": "    original_lines: usize,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 113,
          "content": "    is_new_file: bool,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 114,
          "content": "    primary_prompt: Option<String>,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 115,
          "content": "    prompt_count: usize,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 116,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 117,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 118,
          "content": "impl FileStats {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 119,
          "content": "    fn ai_coverage(&self) -> f64 {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 120,
          "content": "        if self.total_lines == 0 {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 121,
          "content": "            0.0",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 122,
          "content": "        } else {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 123,
          "content": "            (self.ai_lines + self.ai_modified_lines) as f64 / self.total_lines as f64",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 124,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 125,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 126,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 127,
          "content": "    fn should_consolidate(&self, threshold: f64) -> bool {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 128,
          "content": "        // Consolidate if:",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 129,
          "content": "        // 1. It's a new file (no original lines, all AI), OR",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 130,
          "content": "        // 2. High AI coverage AND single prompt (or no prompts to distinguish)",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 131,
          "content": "        self.is_new_file || (self.ai_coverage() >= threshold && self.prompt_count <= 1)",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 132,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 133,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 134,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 135,
          "content": "/// Check if repository is a shallow clone",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 136,
          "content": "fn is_shallow_clone(repo: &Repository) -> bool {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 137,
          "content": "    repo.is_shallow()",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 138,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 139,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 140,
          "content": "/// Run the annotations command",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 141,
          "content": "pub fn run(args: AnnotationsArgs) -> Result<()> {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 142,
          "content": "    let repo = Repository::discover(\".\").context(\"Not in a git repository\")?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 143,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 144,
          "content": "    // Warn about shallow clones",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 145,
          "content": "    if is_shallow_clone(&repo) {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 146,
          "content": "        eprintln!(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 147,
          "content": "            \"{} Running in shallow clone mode - attribution data may be incomplete.\",",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 148,
          "content": "            \"Warning:\".yellow()",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 149,
          "content": "        );",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 150,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 151,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 152,
          "content": "    let notes_store = NotesStore::new(&repo)?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 153,
          "content": "    let mut blamer = AIBlamer::new(&repo)?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 154,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 155,
          "content": "    // Resolve head commit",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 156,
          "content": "    let head_obj = repo",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 157,
          "content": "        .revparse_single(&args.head)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 158,
          "content": "        .with_context(|| format!(\"Failed to resolve: {}\", args.head))?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 159,
          "content": "    let head_commit = head_obj",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 160,
          "content": "        .peel_to_commit()",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 161,
          "content": "        .with_context(|| format!(\"Not a valid commit: {}\", args.head))?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 162,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 163,
          "content": "    // Get commits to analyze",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 164,
          "content": "    let mut revwalk = repo.revwalk()?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 165,
          "content": "    revwalk.push(head_commit.id())?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 166,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 167,
          "content": "    // If base is specified, exclude it and its ancestors",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 168,
          "content": "    if let Some(base_ref) = &args.base {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 169,
          "content": "        let base_obj = repo",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 170,
          "content": "            .revparse_single(base_ref)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 171,
          "content": "            .with_context(|| format!(\"Failed to resolve base: {}\", base_ref))?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 172,
          "content": "        let base_commit = base_obj",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 173,
          "content": "            .peel_to_commit()",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 174,
          "content": "            .with_context(|| format!(\"Not a valid commit: {}\", base_ref))?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 175,
          "content": "        revwalk.hide(base_commit.id())?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 176,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 177,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 178,
          "content": "    // Collect all files changed in the commit range with AI attribution",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 179,
          "content": "    let mut files_to_annotate: Vec<String> = Vec::new();",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 180,
          "content": "    let mut model_info: Option<String> = None;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 181,
          "content": "    let mut session_timestamp: Option<String> = None;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 182,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 183,
          "content": "    for oid_result in revwalk {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 184,
          "content": "        let oid = oid_result?;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 185,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 186,
          "content": "        if let Ok(Some(attr)) = notes_store.fetch_attribution(oid) {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 187,
          "content": "            // Capture model info from first attributed commit",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 188,
          "content": "            if model_info.is_none() {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 189,
          "content": "                model_info = Some(attr.session.model.id.clone());",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 190,
          "content": "                session_timestamp = Some(attr.session.started_at.clone());",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 191,
          "content": "            }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 192,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 193,
          "content": "            for file in &attr.files {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 194,
          "content": "                if !files_to_annotate.contains(&file.path) {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 195,
          "content": "                    // Only add if it has AI lines",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 196,
          "content": "                    if file.summary.ai_lines > 0 || file.summary.ai_modified_lines > 0 {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 197,
          "content": "                        files_to_annotate.push(file.path.clone());",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 198,
          "content": "                    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 199,
          "content": "                }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 200,
          "content": "            }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 201,
          "content": "        }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 202,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 203,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 204,
          "content": "    // Generate annotations for each file",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 205,
          "content": "    let mut annotations: Vec<CheckAnnotation> = Vec::new();",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 206,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 207,
          "content": "    for file_path in &files_to_annotate {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 208,
          "content": "        // Run blame on the file at HEAD",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 209,
          "content": "        let blame_result = match blamer.blame(file_path, Some(&args.head)) {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 210,
          "content": "            Ok(result) => result,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 211,
          "content": "            Err(_) => continue, // Skip files that can't be blamed (deleted, etc.)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 212,
          "content": "        };",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 213,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 214,
          "content": "        // Compute file stats for consolidation decision",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 215,
          "content": "        let file_stats = compute_file_stats(file_path, &blame_result.lines);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 216,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 217,
          "content": "        // Decide whether to consolidate based on mode",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 218,
          "content": "        let should_consolidate = match args.consolidate {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 219,
          "content": "            ConsolidateMode::Auto => file_stats.should_consolidate(args.consolidate_threshold),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 220,
          "content": "            ConsolidateMode::File => true,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 221,
          "content": "            ConsolidateMode::Lines => false,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 222,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 223,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 224,
          "content": "        if should_consolidate {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 225,
          "content": "            // Create a single file-level annotation",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 226,
          "content": "            if let Some(annotation) = create_file_annotation(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 227,
          "content": "                &file_stats,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 228,
          "content": "                model_info.as_deref(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 229,
          "content": "                session_timestamp.as_deref(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 230,
          "content": "            ) {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 231,
          "content": "                annotations.push(annotation);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 232,
          "content": "            }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 233,
          "content": "        } else {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 234,
          "content": "            // Create granular line-level annotations",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 235,
          "content": "            let line_annotations = create_line_annotations(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 236,
          "content": "                file_path,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 237,
          "content": "                &blame_result.lines,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 238,
          "content": "                args.ai_only,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 239,
          "content": "                args.min_lines,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 240,
          "content": "                model_info.as_deref(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 241,
          "content": "                session_timestamp.as_deref(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 242,
          "content": "            );",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 243,
          "content": "            annotations.extend(line_annotations);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 244,
          "content": "        }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 245,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 246,
          "content": "        // Stop if we've hit the max",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 247,
          "content": "        if annotations.len() >= args.max_annotations {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 248,
          "content": "            annotations.truncate(args.max_annotations);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 249,
          "content": "            break;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 250,
          "content": "        }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 251,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 252,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 253,
          "content": "    // Output based on format",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 254,
          "content": "    match args.format {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 255,
          "content": "        AnnotationsFormat::GithubChecks => {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 256,
          "content": "            let output = GithubChecksOutput {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 257,
          "content": "                annotations,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 258,
          "content": "                summary: GithubChecksSummary {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 259,
          "content": "                    files_analyzed: files_to_annotate.len(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 260,
          "content": "                    model: model_info,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 261,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 262,
          "content": "            };",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 263,
          "content": "            println!(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 264,
          "content": "                \"{}\",",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 265,
          "content": "                serde_json::to_string_pretty(&output).unwrap_or_else(|_| \"{}\".to_string())",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 266,
          "content": "            );",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 267,
          "content": "        }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 268,
          "content": "        AnnotationsFormat::Json => {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 269,
          "content": "            println!(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 270,
          "content": "                \"{}\",",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 271,
          "content": "                serde_json::to_string_pretty(&annotations).unwrap_or_else(|_| \"[]\".to_string())",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 272,
          "content": "            );",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 273,
          "content": "        }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 274,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 275,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 276,
          "content": "    Ok(())",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 277,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 278,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 279,
          "content": "/// Compute statistics for a file to help with consolidation decisions",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 280,
          "content": "fn compute_file_stats(path: &str, lines: &[BlameLineResult]) -> FileStats {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 281,
          "content": "    let mut ai_lines = 0;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 282,
          "content": "    let mut ai_modified_lines = 0;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 283,
          "content": "    let mut human_lines = 0;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 284,
          "content": "    let mut original_lines = 0;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 285,
          "content": "    let mut prompts: Vec<String> = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 286,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 287,
          "content": "    for line in lines {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 288,
          "content": "        match &line.source {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 289,
          "content": "            LineSource::AI { .. } => {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 290,
          "content": "                ai_lines += 1;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 291,
          "content": "                if let Some(ref p) = line.prompt_preview {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 292,
          "content": "                    if !prompts.contains(p) {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 293,
          "content": "                        prompts.push(p.clone());",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 294,
          "content": "                    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 295,
          "content": "                }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 296,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 297,
          "content": "            LineSource::AIModified { .. } => {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 298,
          "content": "                ai_modified_lines += 1;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 299,
          "content": "                if let Some(ref p) = line.prompt_preview {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 300,
          "content": "                    if !prompts.contains(p) {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 301,
          "content": "                        prompts.push(p.clone());",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 302,
          "content": "                    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 303,
          "content": "                }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 304,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 305,
          "content": "            LineSource::Human => human_lines += 1,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 306,
          "content": "            LineSource::Original => original_lines += 1,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 307,
          "content": "            LineSource::Unknown => {}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 308,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 309,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 310,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 311,
          "content": "    let is_new_file = original_lines == 0 && (ai_lines + ai_modified_lines + human_lines) > 0;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 312,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 313,
          "content": "    FileStats {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 314,
          "content": "        path: path.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 315,
          "content": "        total_lines: lines.len(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 316,
          "content": "        ai_lines,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 317,
          "content": "        ai_modified_lines,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 318,
          "content": "        human_lines,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 319,
          "content": "        original_lines,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 320,
          "content": "        is_new_file,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 321,
          "content": "        primary_prompt: prompts.first().cloned(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 322,
          "content": "        prompt_count: prompts.len(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 323,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 324,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 325,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 326,
          "content": "/// Create a single file-level annotation",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 327,
          "content": "fn create_file_annotation(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 328,
          "content": "    stats: &FileStats,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 329,
          "content": "    model: Option<&str>,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 330,
          "content": "    timestamp: Option<&str>,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 331,
          "content": ") -> Option<CheckAnnotation> {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 332,
          "content": "    let ai_total = stats.ai_lines + stats.ai_modified_lines;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 333,
          "content": "    if ai_total == 0 {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 334,
          "content": "        return None;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 335,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 336,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 337,
          "content": "    let title = if stats.is_new_file {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 338,
          "content": "        format!(\"New file ({} lines) generated by AI\", stats.total_lines)",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 339,
          "content": "    } else {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 340,
          "content": "        let pct = (stats.ai_coverage() * 100.0).round() as u32;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 341,
          "content": "        format!(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 342,
          "content": "            \"{}% AI-generated ({} of {} lines)\",",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 343,
          "content": "            pct, ai_total, stats.total_lines",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 344,
          "content": "        )",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 345,
          "content": "    };",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 346,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 347,
          "content": "    // Build message",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 348,
          "content": "    let mut message_lines = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 349,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 350,
          "content": "    // Metadata line",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 351,
          "content": "    let mut meta_parts = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 352,
          "content": "    if let Some(m) = model {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 353,
          "content": "        meta_parts.push(format!(\"Model: {}\", m));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 354,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 355,
          "content": "    if let Some(ts) = timestamp {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 356,
          "content": "        meta_parts.push(format!(\"Timestamp: {}\", ts));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 357,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 358,
          "content": "    if !meta_parts.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 359,
          "content": "        message_lines.push(meta_parts.join(\" | \"));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 360,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 361,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 362,
          "content": "    // Stats breakdown",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 363,
          "content": "    message_lines.push(String::new());",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 364,
          "content": "    message_lines.push(format!(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 365,
          "content": "        \"**Breakdown:** {} AI, {} AI-modified, {} human, {} original\",",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 366,
          "content": "        stats.ai_lines, stats.ai_modified_lines, stats.human_lines, stats.original_lines",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 367,
          "content": "    ));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 368,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 369,
          "content": "    // Prompt",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 370,
          "content": "    if let Some(ref prompt) = stats.primary_prompt {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 371,
          "content": "        message_lines.push(String::new());",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 372,
          "content": "        message_lines.push(format!(\"**Prompt:** {}\", truncate_prompt(prompt, 200)));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 373,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 374,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 375,
          "content": "    Some(CheckAnnotation {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 376,
          "content": "        path: stats.path.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 377,
          "content": "        start_line: 1,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 378,
          "content": "        end_line: stats.total_lines as u32,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 379,
          "content": "        annotation_level: AnnotationLevel::Notice,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 380,
          "content": "        title,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 381,
          "content": "        message: message_lines.join(\"\\n\"),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 382,
          "content": "        raw_details: stats.primary_prompt.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 383,
          "content": "    })",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 384,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 385,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 386,
          "content": "/// Create granular line-level annotations for a file",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 387,
          "content": "fn create_line_annotations(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 388,
          "content": "    file_path: &str,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 389,
          "content": "    lines: &[BlameLineResult],",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 390,
          "content": "    ai_only: bool,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 391,
          "content": "    min_lines: u32,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 392,
          "content": "    model: Option<&str>,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 393,
          "content": "    timestamp: Option<&str>,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 394,
          "content": ") -> Vec<CheckAnnotation> {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 395,
          "content": "    let groups = group_ai_lines(lines, ai_only);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 396,
          "content": "    let mut annotations = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 397,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 398,
          "content": "    for group in groups {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 399,
          "content": "        let line_count = group.end_line - group.start_line + 1;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 400,
          "content": "        if line_count < min_lines {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 401,
          "content": "            continue;",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 402,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 403,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 404,
          "content": "        let title = match group.source_type {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 405,
          "content": "            GroupSourceType::AI => format!(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 406,
          "content": "                \"AI Generated ({} line{})\",",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 407,
          "content": "                line_count,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 408,
          "content": "                if line_count > 1 { \"s\" } else { \"\" }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 409,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 410,
          "content": "            GroupSourceType::AIModified => format!(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 411,
          "content": "                \"AI Modified ({} line{})\",",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 412,
          "content": "                line_count,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 413,
          "content": "                if line_count > 1 { \"s\" } else { \"\" }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 414,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 415,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 416,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 417,
          "content": "        // Build message",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 418,
          "content": "        let mut message_lines = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 419,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 420,
          "content": "        // Metadata",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 421,
          "content": "        let mut meta_parts = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 422,
          "content": "        if let Some(m) = model {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 423,
          "content": "            meta_parts.push(format!(\"Model: {}\", m));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 424,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 425,
          "content": "        if let Some(ts) = timestamp {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 426,
          "content": "            meta_parts.push(format!(\"Timestamp: {}\", ts));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 427,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 428,
          "content": "        if !meta_parts.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 429,
          "content": "            message_lines.push(meta_parts.join(\" | \"));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 430,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 431,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 432,
          "content": "        // Prompt",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 433,
          "content": "        if let Some(ref prompt) = group.prompt_preview {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 434,
          "content": "            message_lines.push(String::new());",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 435,
          "content": "            message_lines.push(format!(\"**Prompt:** {}\", prompt));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 436,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 437,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 438,
          "content": "        let message = if message_lines.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 439,
          "content": "            match group.source_type {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 440,
          "content": "                GroupSourceType::AI => {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 441,
          "content": "                    \"These lines were generated by AI and committed unchanged.\".to_string()",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 442,
          "content": "                }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 443,
          "content": "                GroupSourceType::AIModified => {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 444,
          "content": "                    \"These lines were generated by AI and then modified by a human.\".to_string()",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 445,
          "content": "                }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 446,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 447,
          "content": "        } else {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 448,
          "content": "            message_lines.join(\"\\n\")",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 449,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 450,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 451,
          "content": "        annotations.push(CheckAnnotation {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 452,
          "content": "            path: file_path.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 453,
          "content": "            start_line: group.start_line,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 454,
          "content": "            end_line: group.end_line,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 455,
          "content": "            annotation_level: AnnotationLevel::Notice,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 456,
          "content": "            title,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 457,
          "content": "            message,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 458,
          "content": "            raw_details: group.prompt_preview.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 459,
          "content": "        });",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 460,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 461,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 462,
          "content": "    annotations",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 463,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 464,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 465,
          "content": "/// Output format for GitHub Checks API",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 466,
          "content": "#[derive(Debug, Serialize)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 467,
          "content": "struct GithubChecksOutput {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 468,
          "content": "    annotations: Vec<CheckAnnotation>,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 469,
          "content": "    summary: GithubChecksSummary,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 470,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 471,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 472,
          "content": "#[derive(Debug, Serialize)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 473,
          "content": "struct GithubChecksSummary {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 474,
          "content": "    files_analyzed: usize,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 475,
          "content": "    model: Option<String>,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 476,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 477,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 478,
          "content": "/// Grouped annotations for a contiguous range of AI lines",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 479,
          "content": "#[derive(Debug)]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 480,
          "content": "struct AnnotationGroup {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 481,
          "content": "    start_line: u32,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 482,
          "content": "    end_line: u32,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 483,
          "content": "    source_type: GroupSourceType,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 484,
          "content": "    prompt_preview: Option<String>,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 485,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 486,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 487,
          "content": "#[derive(Debug, Clone, Copy, PartialEq)]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 488,
          "content": "enum GroupSourceType {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 489,
          "content": "    AI,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 490,
          "content": "    AIModified,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 491,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 492,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 493,
          "content": "/// Group consecutive AI lines into annotation ranges",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 494,
          "content": "fn group_ai_lines(lines: &[BlameLineResult], ai_only: bool) -> Vec<AnnotationGroup> {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 495,
          "content": "    let mut groups: Vec<AnnotationGroup> = Vec::new();",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 496,
          "content": "    let mut current_group: Option<AnnotationGroup> = None;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 497,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 498,
          "content": "    for line in lines {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 499,
          "content": "        let source_type = match &line.source {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 500,
          "content": "            LineSource::AI { .. } => Some(GroupSourceType::AI),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 501,
          "content": "            LineSource::AIModified { .. } if !ai_only => Some(GroupSourceType::AIModified),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 502,
          "content": "            _ => None,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 503,
          "content": "        };",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 504,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 505,
          "content": "        if let Some(stype) = source_type {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 506,
          "content": "            match &mut current_group {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 507,
          "content": "                Some(group)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 508,
          "content": "                    if group.source_type == stype && group.end_line + 1 == line.line_number =>",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 509,
          "content": "                {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 510,
          "content": "                    // Extend current group",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 511,
          "content": "                    group.end_line = line.line_number;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 512,
          "content": "                    // Update prompt if we don't have one yet",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 513,
          "content": "                    if group.prompt_preview.is_none() {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 514,
          "content": "                        group.prompt_preview = line.prompt_preview.clone();",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 515,
          "content": "                    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 516,
          "content": "                }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 517,
          "content": "                _ => {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 518,
          "content": "                    // Start a new group (save current if exists)",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 519,
          "content": "                    if let Some(g) = current_group.take() {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 520,
          "content": "                        groups.push(g);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 521,
          "content": "                    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 522,
          "content": "                    current_group = Some(AnnotationGroup {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 523,
          "content": "                        start_line: line.line_number,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 524,
          "content": "                        end_line: line.line_number,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 525,
          "content": "                        source_type: stype,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 526,
          "content": "                        prompt_preview: line",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 527,
          "content": "                            .prompt_preview",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 528,
          "content": "                            .clone()",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 529,
          "content": "                            .map(|p| truncate_prompt(&p, 200)),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 530,
          "content": "                    });",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 531,
          "content": "                }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 532,
          "content": "            }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 533,
          "content": "        } else {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 534,
          "content": "            // Non-AI line - close current group if any",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 535,
          "content": "            if let Some(g) = current_group.take() {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 536,
          "content": "                groups.push(g);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 537,
          "content": "            }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 538,
          "content": "        }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 539,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 540,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 541,
          "content": "    // Don't forget the last group",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 542,
          "content": "    if let Some(g) = current_group {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 543,
          "content": "        groups.push(g);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 544,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 545,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 546,
          "content": "    groups",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 547,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 548,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 549,
          "content": "#[cfg(test)]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 550,
          "content": "mod tests {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 551,
          "content": "    use super::*;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 552,
          "content": "    use crate::capture::snapshot::LineSource;",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 553,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 554,
          "content": "    fn make_line(line_number: u32, source: LineSource) -> BlameLineResult {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 555,
          "content": "        BlameLineResult {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 556,
          "content": "            line_number,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 557,
          "content": "            content: format!(\"line {}\", line_number),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 558,
          "content": "            commit_id: \"abc123\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 559,
          "content": "            commit_short: \"abc123\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 560,
          "content": "            author: \"Test\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 561,
          "content": "            source,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 562,
          "content": "            prompt_index: Some(0),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 563,
          "content": "            prompt_preview: Some(\"Test prompt\".to_string()),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 564,
          "content": "        }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 565,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 566,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 567,
          "content": "    #[test]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 568,
          "content": "    fn test_group_consecutive_ai_lines() {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 569,
          "content": "        let lines = vec![",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 570,
          "content": "            make_line(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 571,
          "content": "                1,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 572,
          "content": "                LineSource::AI {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 573,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 574,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 575,
          "content": "            ),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 576,
          "content": "            make_line(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 577,
          "content": "                2,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 578,
          "content": "                LineSource::AI {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 579,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 580,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 581,
          "content": "            ),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 582,
          "content": "            make_line(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 583,
          "content": "                3,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 584,
          "content": "                LineSource::AI {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 585,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 586,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 587,
          "content": "            ),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 588,
          "content": "            make_line(4, LineSource::Human),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 589,
          "content": "            make_line(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 590,
          "content": "                5,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 591,
          "content": "                LineSource::AI {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 592,
          "content": "                    edit_id: \"e2\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 593,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 594,
          "content": "            ),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 595,
          "content": "        ];",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 596,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 597,
          "content": "        let groups = group_ai_lines(&lines, false);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 598,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 599,
          "content": "        assert_eq!(groups.len(), 2);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 600,
          "content": "        assert_eq!(groups[0].start_line, 1);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 601,
          "content": "        assert_eq!(groups[0].end_line, 3);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 602,
          "content": "        assert_eq!(groups[1].start_line, 5);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 603,
          "content": "        assert_eq!(groups[1].end_line, 5);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 604,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 605,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 606,
          "content": "    #[test]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 607,
          "content": "    fn test_group_mixed_ai_and_modified() {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 608,
          "content": "        let lines = vec![",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 609,
          "content": "            make_line(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 610,
          "content": "                1,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 611,
          "content": "                LineSource::AI {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 612,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 613,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 614,
          "content": "            ),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 615,
          "content": "            make_line(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 616,
          "content": "                2,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 617,
          "content": "                LineSource::AIModified {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 618,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 619,
          "content": "                    similarity: 0.8,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 620,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 621,
          "content": "            ),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 622,
          "content": "            make_line(",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 623,
          "content": "                3,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 624,
          "content": "                LineSource::AI {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 625,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 626,
          "content": "                },",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 627,
          "content": "            ),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 628,
          "content": "        ];",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 629,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 630,
          "content": "        // With ai_only=false, AI and AIModified are separate groups",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 631,
          "content": "        let groups = group_ai_lines(&lines, false);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 632,
          "content": "        assert_eq!(groups.len(), 3);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 633,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 634,
          "content": "        // With ai_only=true, AIModified is skipped",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 635,
          "content": "        let groups_ai_only = group_ai_lines(&lines, true);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 636,
          "content": "        assert_eq!(groups_ai_only.len(), 2);",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 637,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 638,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 639,
          "content": "    #[test]",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 640,
          "content": "    fn test_annotation_serialization() {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 641,
          "content": "        let annotation = CheckAnnotation {",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 642,
          "content": "            path: \"src/main.rs\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 643,
          "content": "            start_line: 1,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 644,
          "content": "            end_line: 5,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 645,
          "content": "            annotation_level: AnnotationLevel::Notice,",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 646,
          "content": "            title: \"AI Generated (5 lines)\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 647,
          "content": "            message: \"Model: claude-opus-4-5-20251101\".to_string(),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 648,
          "content": "            raw_details: Some(\"Prompt: Add main function\".to_string()),",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 649,
          "content": "        };",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 650,
          "content": "",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 651,
          "content": "        let json = serde_json::to_string(&annotation).unwrap();",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 652,
          "content": "        assert!(json.contains(\"\\\"annotation_level\\\":\\\"notice\\\"\"));",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 653,
          "content": "        assert!(json.contains(\"\\\"start_line\\\":1\"));",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 654,
          "content": "        assert!(json.contains(\"\\\"end_line\\\":5\"));",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 655,
          "content": "    }",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        },
        {
          "line_number": 656,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 657,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 658,
          "content": "    fn test_file_stats_new_file() {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 659,
          "content": "        let lines = vec![",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 660,
          "content": "            make_line(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 661,
          "content": "                1,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 662,
          "content": "                LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 663,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 664,
          "content": "                },",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 665,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 666,
          "content": "            make_line(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 667,
          "content": "                2,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 668,
          "content": "                LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 669,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 670,
          "content": "                },",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 671,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 672,
          "content": "        ];",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 673,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 674,
          "content": "        let stats = compute_file_stats(\"test.rs\", &lines);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 675,
          "content": "        assert!(stats.is_new_file);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 676,
          "content": "        assert_eq!(stats.ai_lines, 2);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 677,
          "content": "        assert_eq!(stats.original_lines, 0);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 678,
          "content": "        assert!(stats.should_consolidate(0.7));",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 679,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 680,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 681,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 682,
          "content": "    fn test_file_stats_mixed_file() {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 683,
          "content": "        let lines = vec![",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 684,
          "content": "            make_line(1, LineSource::Original),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 685,
          "content": "            make_line(2, LineSource::Original),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 686,
          "content": "            make_line(3, LineSource::Original),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 687,
          "content": "            make_line(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 688,
          "content": "                4,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 689,
          "content": "                LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 690,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 691,
          "content": "                },",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 692,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 693,
          "content": "        ];",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 694,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 695,
          "content": "        let stats = compute_file_stats(\"test.rs\", &lines);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 696,
          "content": "        assert!(!stats.is_new_file);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 697,
          "content": "        assert_eq!(stats.ai_coverage(), 0.25);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 698,
          "content": "        assert!(!stats.should_consolidate(0.7)); // Below threshold",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 699,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 700,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 701,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 702,
          "content": "    fn test_file_stats_high_ai_coverage() {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 703,
          "content": "        let lines = vec![",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 704,
          "content": "            make_line(1, LineSource::Original),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 705,
          "content": "            make_line(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 706,
          "content": "                2,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 707,
          "content": "                LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 708,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 709,
          "content": "                },",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 710,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 711,
          "content": "            make_line(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 712,
          "content": "                3,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 713,
          "content": "                LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 714,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 715,
          "content": "                },",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 716,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 717,
          "content": "            make_line(",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 718,
          "content": "                4,",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 719,
          "content": "                LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 720,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 721,
          "content": "                },",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 722,
          "content": "            ),",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 723,
          "content": "        ];",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 724,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 725,
          "content": "        let stats = compute_file_stats(\"test.rs\", &lines);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 726,
          "content": "        assert!(!stats.is_new_file);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 727,
          "content": "        assert_eq!(stats.ai_coverage(), 0.75);",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 728,
          "content": "        assert!(stats.should_consolidate(0.7)); // Above threshold, single prompt",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 729,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "5e4061db-2384-494a-b659-ba33186fac02"
          },
          "edit_id": "5e4061db-2384-494a-b659-ba33186fac02",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 730,
          "content": "}",
          "source": {
            "type": "Original"
          },
          "edit_id": null,
          "prompt_index": null,
          "confidence": 1.0
        }
      ],
      "summary": {
        "total_lines": 730,
        "ai_lines": 356,
        "ai_modified_lines": 0,
        "human_lines": 0,
        "original_lines": 374,
        "unknown_lines": 0
      }
    }
  ]
}